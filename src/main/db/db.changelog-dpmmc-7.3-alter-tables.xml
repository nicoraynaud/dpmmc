<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet author="rayni84" id="99058c86-9d16-11e4-89d3-123b93f75cba-1">
        <addColumn tableName="PERSONNES">
            <column name="NOM" type="NVARCHAR2(255)"/>
        </addColumn>
    </changeSet>

    <changeSet author="rayni84" id="99058c86-9d16-11e4-89d3-123b93f75cba-2">
        <addDefaultValue tableName="ERREURS_GEOLOCALISATIONS_VP" columnName="ID" defaultValueSequenceNext="DPMMC_S_ERREURS_GEOLOC_VP" />
    </changeSet>

    <changeSet author="rayni84" id="99058c86-9d16-11e4-89d3-123b93f75cba-3">
        <createSequence cycle="false" incrementBy="1" minValue="1" ordered="false" sequenceName="DPMMC_S_FICHE_REF" startValue="1"/>

    </changeSet>

    <changeSet author="rayni84" id="99058c86-9d16-11e4-89d3-123b93f75cba-4">
        <sql>select setval('"dpmmc_s_fiche_ref"', (select CAST(max(to_number(substring(reference from 6 for 5), '99999')) AS BIGINT) as s from fiches));</sql>
    </changeSet>


    <changeSet author="rayni84" id="99058c86-9d16-11e4-89d3-123b93f75cba-5">
        <addPrimaryKey columnNames="ID" constraintName="HISTORIQUES_PK" tableName="HISTORIQUES"/>
        <addDefaultValue tableName="HISTORIQUES" columnName="ID" defaultValueSequenceNext="DPMMC_S_HISTORIQUES" />
    </changeSet>

</databaseChangeLog>
